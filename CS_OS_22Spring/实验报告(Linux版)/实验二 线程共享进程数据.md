## 实验二 线程共享进程数据

### 实验题目

线程共享进程数据

### 实验目的

了解线程与进程之间的数据共享关系。创建一个线程，在线程中
更改进程中的数据。

### 实验软件环境

VC++6.0 或者 Linux 操作系统

### 实验内容

在进程中定义全局共享数据，在线程中直接引用该数据进行更改
并输出该数据

### 实验程序及分析

```c
#include<stdio.h>
#include "pthread.h"
#include<unistd.h>
static int shdata = 4;
void* create (void *arg) {
    printf("new pthread ...\n");
    printf("shared data = %d, i'll let it add 1\n", shdata);
    shdata++;
    return (void* )0;
}
int main() {
    pthread_t threadid = 0;
    int ret = pthread_create(&threadid, NULL, create, NULL);
    if (ret) {
        printf("create thread failed\n");
        return -1;
    }
    sleep(3);
    printf("create thread success!\n");
    printf("shared data = %d\n", shdata);
    return 0;
}

```

### 实验截图![2022-05-06 17-04-49屏幕截图](../../../home/yjmstr/图片/2022-05-06 17-04-49屏幕截图.png)

### 实验心得体会

需要在具有可执行权限的卷上运行程序，否则会无法执行

![image-20220506170725205](../../../home/yjmstr/.config/Typora/typora-user-images/image-20220506170725205.png)